{% extends "_layout.twig" %}
{% from 'components/wikilinks.twig' import wikilinks %}

{% set title = "Edit article" %}

	{% block content %}
<h1>Edit article</h1>

<form action="/wiki/edit.php?page={{ pagetitle_slugified }}" method="POST">
	<p><strong>{{ pagetitle }}</strong></p>
	<p><textarea name="text" placeholder="Page content" cols="80" rows="15">{{ page.content }}</textarea></p>
	<p><em>Markdown formatting syntax is allowed.</em></p>

	<p><input type="text" name="description" placeholder="Description (Describe what has been changed)" size="60"></p>

	<p>
		<input type="submit" name="action" value="Save changes"></input>
		<input type="submit" name="action" value="Preview"></input>
	</p>
</form>

{% if action == 'Preview' %}
	<hr>

	<h1>Preview: {{ pagetitle }}</h1>
	{{ page.content | markdown_wiki }}
{% endif %}

{{ wikilinks(pagetitle_slugified, "edit") }}
	{% endblock %}